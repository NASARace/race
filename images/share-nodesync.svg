<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="598px" preserveAspectRatio="none" style="width:868px;height:598px;" version="1.1" viewBox="0 0 868 598" width="868px" zoomAndPan="magnify"><defs><filter height="300%" id="fcarmzscfsswf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="189" x="339.75" y="29.4023">Node Synchronization</text><rect fill="#DDDDDD" height="551.6348" style="stroke:#A80036;stroke-width:1.0;" width="303" x="98" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84" x="207.5" y="53.7676">downstream</text><rect fill="#DDDDDD" height="551.6348" style="stroke:#A80036;stroke-width:1.0;" width="297" x="475" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="591" y="53.7676">upstream</text><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="181.9297"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="152.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="349.4824"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="209.5186" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522.5" y="139.9639"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522.5" y="413.1035"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="138" x2="138" y1="95.998" y2="554.3457"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="342" x2="342" y1="95.998" y2="554.3457"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="527" x2="527" y1="95.998" y2="554.3457"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="731" x2="731" y1="95.998" y2="554.3457"/><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="102" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="109" y="81.0449">Updater</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="102" y="553.3457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="109" y="573.8809">Updater</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="105" x="288" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="295" y="81.0449">UpConnector</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="105" x="288" y="553.3457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="295" y="573.8809">UpConnector</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="93" x="479" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="486" y="81.0449">NodeServer</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="93" x="479" y="553.3457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="486" y="573.8809">NodeServer</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="695" y="60.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="702" y="81.0449">Updater</text><rect fill="#FEFECE" filter="url(#fcarmzscfsswf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="695" y="553.3457"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="702" y="573.8809">Updater</text><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="181.9297"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="152.5527" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="349.4824"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="209.5186" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522.5" y="139.9639"/><rect fill="#FFFFFF" filter="url(#fcarmzscfsswf)" height="41.9658" style="stroke:#A80036;stroke-width:1.0;" width="10" x="522.5" y="413.1035"/><polygon fill="#A80036" points="510.5,135.9639,520.5,139.9639,510.5,143.9639,514.5,139.9639" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="516.5" y1="139.9639" y2="139.9639"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="349.5" y="135.2217">NodeDates</text><path d="M197,110.998 L197,150.998 L333,150.998 L333,120.998 L323,110.998 L197,110.998 " fill="#FBFB77" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M323,110.998 L323,120.998 L333,120.998 L323,110.998 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="203" y="128.5664">r/o CDs: last date</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="203" y="143.877">r/w CDs: CV dates</text><polygon fill="#A80036" points="325.5,177.9297,335.5,181.9297,325.5,185.9297,329.5,181.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="138.5" x2="331.5" y1="181.9297" y2="181.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="145.5" y="177.1875">(Node⎮ColumnDataChange)*</text><polygon fill="#A80036" points="510.5,219.8955,520.5,223.8955,510.5,223.8955" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="521.5" y1="223.8955" y2="223.8955"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="349.5" y="219.1533">ColumnDataChange*</text><path d="M537,194.9297 L537,234.9297 L859,234.9297 L859,204.9297 L849,194.9297 L537,194.9297 " fill="#FFA500" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M849,194.9297 L849,204.9297 L859,204.9297 L849,194.9297 " fill="#FFA500" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="543" y="212.498">possible race</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="543" y="227.8086">not processed before nodeDates reply complete</text><polygon fill="#A80036" points="353.5,266.8613,343.5,270.8613,353.5,274.8613,349.5,270.8613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="521.5" y1="270.8613" y2="270.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="359.5" y="266.1191">ColumnDataChange*</text><path d="M537,249.5508 L537,274.5508 L689,274.5508 L689,259.5508 L679,249.5508 L537,249.5508 " fill="#FBFB77" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M679,249.5508 L679,259.5508 L689,259.5508 L679,249.5508 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="543" y="267.1191">newer upstream data</text><polygon fill="#A80036" points="353.5,306.1719,343.5,310.1719,353.5,314.1719,349.5,310.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="521.5" y1="310.1719" y2="310.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="359.5" y="305.4297">NodeReachabilityChange</text><path d="M537,288.8613 L537,313.8613 L812,313.8613 L812,298.8613 L802,288.8613 L537,288.8613 " fill="#FBFB77" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M802,288.8613 L802,298.8613 L812,298.8613 L802,288.8613 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="543" y="306.4297">online downstream nodes (== UC peers)</text><polygon fill="#A80036" points="358.5,345.4824,348.5,349.4824,358.5,353.4824,354.5,349.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="352.5" x2="526.5" y1="349.4824" y2="349.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="364.5" y="344.7402">NodeDates</text><path d="M537,328.1719 L537,353.1719 L739,353.1719 L739,338.1719 L729,328.1719 L537,328.1719 " fill="#FBFB77" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M729,328.1719 L729,338.1719 L739,338.1719 L729,328.1719 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="543" y="345.7402">? only dates of outdated own</text><polygon fill="#A80036" points="719.5,379.793,729.5,383.793,719.5,387.793,723.5,383.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="527.5" x2="725.5" y1="383.793" y2="383.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="534.5" y="379.0508">ColumnDataChange*</text><polygon fill="#A80036" points="543.5,409.1035,533.5,413.1035,543.5,417.1035,539.5,413.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537.5" x2="730.5" y1="413.1035" y2="413.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="549.5" y="408.3613">(Node⎮ColumnDataChange)*</text><polygon fill="#A80036" points="358.5,451.0693,348.5,455.0693,358.5,455.0693" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="526.5" y1="455.0693" y2="455.0693"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="364.5" y="450.3271">ColumnDataChange*</text><path d="M5,426.1035 L5,466.1035 L329,466.1035 L329,436.1035 L319,426.1035 L5,426.1035 " fill="#FFA500" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M319,426.1035 L319,436.1035 L329,436.1035 L319,426.1035 " fill="#FFA500" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="11" y="443.6719">possible race</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="11" y="458.9824">not processed before NodeDates reply complete</text><polygon fill="#A80036" points="515.5,498.0352,525.5,502.0352,515.5,506.0352,519.5,502.0352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="521.5" y1="502.0352" y2="502.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="349.5" y="497.293">ColumnDataChange*</text><path d="M158,480.7246 L158,505.7246 L328,505.7246 L328,490.7246 L318,480.7246 L158,480.7246 " fill="#FBFB77" filter="url(#fcarmzscfsswf)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M318,480.7246 L318,490.7246 L328,490.7246 L318,480.7246 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="164" y="498.293">newer downstream data</text><polygon fill="#A80036" points="149.5,532.3457,139.5,536.3457,149.5,540.3457,145.5,536.3457" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="143.5" x2="341.5" y1="536.3457" y2="536.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="155.5" y="531.6035">ColumnDataChange*</text><!--MD5=[b0f334c6906dcfe109d011c71eced48f]
@startuml

title Node Synchronization

box downstream
participant Updater as Ud
participant UpConnector as UC
end box

box upstream
participant NodeServer as NS
participant Updater as Uu
end box

UC -> NS : NodeDates
              note left: r/o CDs: last date\nr/w CDs: CV dates
activate NS

Ud -> UC : (Node⎮ColumnDataChange)*
activate UC
UC -\ NS : ColumnDataChange*
              note right #orange: possible race\nnot processed before nodeDates reply complete
deactivate UC

NS -> UC : ColumnDataChange*
              note right: newer upstream data

NS -> UC : NodeReachabilityChange
              note right: online downstream nodes (== UC peers)

NS -> UC : NodeDates
              note right: ? only dates of outdated own
deactivate NS
activate UC

NS -> Uu : ColumnDataChange*

Uu -> NS : (Node⎮ColumnDataChange)*
activate NS

NS -\ UC : ColumnDataChange*
             note left #orange: possible race\nnot processed before NodeDates reply complete
deactivate NS

UC -> NS : ColumnDataChange*
              note left: newer downstream data
deactivate UC

UC -> Ud : ColumnDataChange*

@enduml

PlantUML version 1.2021.2(Sun Mar 07 03:10:27 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>