name = "cesium-hotspot"

start-time = "2020-08-22T18:00:00Z"

cache.dir = ${user.home}"/cache"
archive.hotspot = "../race-data/odin-czu-081620/fire_archive_SV-C2_271848.csv.gz"

actors = [
  {
    name = "httpServer"
    class = "gov.nasa.race.http.HttpServer"

    host = "localhost"
    port = "9000"
    //log-incoming = true

    ws-keep-alive = 30s

    routes = [
      { // name is used as default if request-prefix is not specified
        name = "hotspot"
        class = "gov.nasa.race.cesium.CesiumHotspotApp"
        access-token = "??cesium.access-token"

        cesium-cache = ${cache.dir}"/cesium/current" // for cesium content
        cache-dir = ${cache.dir} // for general proxied requests
        request-render = true

        read-from = "/hotspot"

        hotspot {
          name = "hotspot"
          path = "/fire/detection"
          description = "satellite fire hotspots (VIIRS, MODIS)"
          show = true
          history = "7d"
          time-steps = [
            { hours =  6, color = "#ff0000" },
            { hours = 12, color = "#c00000e0" },
            { hours = 24, color = "#a00000c0" },
            { hours = 48, color = "#60000080" }
          ]
          bright = { kelvin = 310, color = "#ffff00" }
          frp = { megawatts = 10, color = "#000000" }
        }

        eye = {
          lon = -122.234
          lat = 37.176
          alt = 65000
        }
      }
    ]
  },

  { name = "hotspotReplay"
    class = ".land.actor.InTimeHotspotReplayActor"
    write-to = "/hotspot"

    //can-reset-clock = true

    pathname = ${archive.hotspot}
    buffer-size = 4096

    history = "7d"
    bounds { // just the CZU fire
      nw = { lat = 37.277, lon = -122.385 }
      se = { lat = 37.003, lon = -121.943 }
    }
  }
]


include classpath("config/logging-race.conf")