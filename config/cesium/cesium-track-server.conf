name = "cesium-track-server"

archive = "../data/all-080717-1744/sbs.txt.gz"  // override with -Darchive=... from command line
cache.dir = ${user.home}"/cache"

actors = [
  {
    name = "httpServer"
    class = "gov.nasa.race.http.HttpServer"

    host = "localhost"
    port = "9000"
    //log-incoming = true

    ws-keep-alive = 30s

    routes = [
      { // name is used as default if request-prefix is not specified
        name = "tracks"
        class = "gov.nasa.race.cesium.CesiumTrackRoute"
        access-token = "??cesium.access-token"

        // resource origins and cache dirs
        cesium-cache = ${cache.dir}"/cesium/1.87"

        maptile-provider = "http://tile.stamen.com/terrain"
        maptile-cache = ${cache.dir}"/tile.stamen.com/terrain"

        elevation-provider = "https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"
        elevation-cache = ${cache.dir}"/elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"

        eye = {
          lon = -122.4
          lat = 37.6
          alt = 150000
        }

        read-from = "/tracks"
      }
    ]
  },

//  {
//    name = "trackSource"
//    class = ".air.actor.SimpleAircraft"
//    tick-interval = 5s
//    write-to = "/tracks"
//
//    id = "557902201"
//    cs = "XY333"
//    lat = 37.246822
//    lon = -121.9770277
//    altitude-ft = 5000
//    heading = 84.0
//    speed-kn = 350.0
//  }

  {
    name = "sbsReplay"
    class = ".air.actor.SbsReplayActor"
    write-to = "/tracks"

    can-reset-clock = true
    drop-after = "20 seconds"    // if set, check for dropped flights

    pathname = ${archive}
    buffer-size = 32768
  }

//  {
//    name = "replayer"
//    class = ".air.actor.SfdpsReplayActor"
//    write-to = "/tracks"
//
//    can-reset-clock = true
//    served-topics = "<all>"
//    pathname = "../data/all-080717-1744/sfdps.ta.gz"
//  }
]


include classpath("config/logging-race.conf")