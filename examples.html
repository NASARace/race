<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>RACE</title>

        <link href="./race-html.css" rel="stylesheet"/>
    </head>

    <body>
        <div class="navbar">
            <div class=""banner>
                <a href="index.html" ><img class="logo" src="./images/race128.png"></a>
                <p class="doctitle">RACE Manual</p>
            </div>
            <br/>
            <div class="toc">
                <p class="title">Project Links</p>
                <ul>
                    <li><span class="toc level2"><a href="https://github.com/NASARace/race.git">Repository</a></span></li>
                    <li><span class="toc level2"><a href="http://nasarace.github.io/race">Website</a></span></li>
                </ul>
            </div>
            <div class="pagetoc">
                <div class="toc">
                  <p class="title">Page</p>
                  <ul>
                    <li><span class="toc level1"><a href="#basic-examples">Basic Examples</a></span></li>
                    <li><span class="toc level1"><a href="#distributed-operation">Distributed Operation</a></span></li>
                    <li><span class="toc level1"><a href="#live-data-import">Live Data Import</a></span></li>
                    <li><span class="toc level1"><a href="#data-replay">Data Replay</a></span></li>
                  </ul>
                </div>
            </div>
            <div class="globaltoc">
                <div class="toc">
                  <p class="title">Site</p>
                  <ul>
                    <li><span class="toc level1"><a href="index.html">About RACE</a></span></li>
                    <li><span class="toc level1"><a href="project-log.html">Project Log</a></span></li>
                    <li>
                      <p class="toc level1">Installing RACE</p>
                      <ul>
                        <li><span class="toc level2"><a href="installation/prerequisites.html">Prerequisites</a></span></li>
                        <li><span class="toc level2"><a href="installation/download.html">Downloading RACE</a></span></li>
                        <li><span class="toc level2"><a href="installation/build.html">Building RACE</a></span></li>
                        <li><span class="toc level2"><a href="installation/osx.html">OS X Specifics</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Using RACE</p>
                      <ul>
                        <li><span class="toc level2"><a href="usage/running.html">How to Run RACE</a></span></li>
                        <li><span class="toc level2"><a href="usage/configuration.html">RACE Configuration</a></span></li>
                        <li><span class="toc level2"><a href="usage/encryption.html">Using Encrypted Configurations</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1"><a href="actors.html">Actors</a></p>
                      <ul>
                        <li><span class="toc level2"><a href="actors.html#actor-components-and-properties">Actor Components and Properties</a></span></li>
                        <li><span class="toc level2"><a href="actors.html#actor-communication">Actor Communication</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">RACE Design</p>
                      <ul>
                        <li><span class="toc level2"><a href="design/overview.html">Design Overview</a></span></li>
                        <li><span class="toc level2"><a href="design/configuration.html">Runtime Configuration</a></span></li>
                        <li><span class="toc level2"><a href="design/raceactors.html">RaceActors</a></span></li>
                        <li><span class="toc level2"><a href="design/channeltopics.html">ChannelTopics</a></span></li>
                        <li><span class="toc level2"><a href="design/worldwind.html">WorldWind Viewer</a></span></li>
                        <li><span class="toc level2"><a href="design/remotelauncher.html">RemoteLauncher</a></span></li>
                        <li><span class="toc level2"><a href="design/layers-and-modules.html">Layers and Modules</a></span></li>
                        <li><span class="toc level2"><a href="design/directory-structure.html">Directory Structure</a></span></li>
                        <li><span class="toc level2"><a href="design/local-build.html">Local Build Configuration</a></span></li>
                        <li><span class="toc level2"><a href="design/dds.html">RACE and DDS</a></span></li>
                        <li><span class="toc level2"><a href="design/extproject.html">Using RACE from External Projects</a></span></li>
                        <li><span class="toc level2"><a href="design/whyscala.html">Why Scala</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1 active">RACE Examples</p>
                      <ul>
                        <li><span class="toc level2"><a href="#basic-examples">Basic Examples</a></span></li>
                        <li><span class="toc level2"><a href="#distributed-operation">Distributed Operation</a></span></li>
                        <li><span class="toc level2"><a href="#live-data-import">Live Data Import</a></span></li>
                        <li><span class="toc level2"><a href="#data-replay">Data Replay</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Documentation</p>
                      <ul>
                        <li><span class="toc level2"><a href="documentation/overview.html">RACE Documentation Overview</a></span></li>
                        <li><span class="toc level2"><a href="documentation/presentations.html">Available Slide Presentations</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1"><a href="learning.html">Learning Resources</a></p>
                      <ul>
                        <li><span class="toc level2"><a href="learning.html#scala">Scala</a></span></li>
                        <li><span class="toc level2"><a href="learning.html#actors-and-akka">Actors and Akka</a></span></li>
                        <li><span class="toc level2"><a href="learning.html#sbt">SBT</a></span></li>
                        <li><span class="toc level2"><a href="learning.html#interactive-scala-akka-and-sbt-learning-environment-and-examples">Interactive Scala, Akka and SBT Learning Environment and Examples</a></span></li>
                        <li><span class="toc level2"><a href="learning.html#git">Git</a></span></li>
                      </ul>
                    </li>
                    <li><span class="toc level1"><a href="glossary.html">Glossary</a></span></li>
                  </ul>
                </div>
            </div>
        </div>

        <div class="main">
            <h1 id="race-examples" class="title">RACE Examples</h1>
            <p>RACE comes with a variety of sample configuration files, but many of them do require access to online data that
            is not publicly available. This section provides a progression of examples to familiarize yourself with basic
            RACE functions. In addition to running the examples, please have a look at the respective configuration files
            to understand what the example is supposed to do.</p>
            <p>While some examples can be executed from within SBT by means of the <code>run &lt;config-file&gt;</code> task, a number of the examples
            make use of multiple communicating RACE instances. It is therefore recommended to build RACE by running (once):</p>
            <pre><code>&gt; sbt stage</code></pre>
            <p>Referring to <a href="usage/running.html#how-to-run-race">How to Run RACE</a> section, each example is executed from the command line by providing a
            configuration file as the command line argument, e.g. from within the RACE root directory:</p>
            <pre><code>&gt; ./race &lt;path-to-config-file&gt;</code></pre>
            <p>Some examples will require additional arguments.</p>
            
            <h2 id="basic-examples" class="section">Basic Examples</h2>
            <p><strong>(1) config/local/aircraft.conf</strong>  is a basic example that only consists of two actors: a simple aircraft
            example that publishes <code>FlightPos</code> messages, and a <code>ProbeActor</code> that prints messages it receives from subscribed
            channels:</p>
            <pre><code>&gt; ./race config/local/aircraft.conf</code></pre>
            <p>This example mostly serves the purpose of verifying that RACE was built correctly. The RACE console menu can be obtained
            by hitting &lt;enter&gt;, use option &#39;2&#39; to see configured actors, and option &#39;9&#39; to terminate RACE</p>
            <p><strong>(2) config/local/aircraft-ww.conf</strong> the next progression is to display the modeled aircraft positions by means of
            RACEs viewer infrastructure, which uses a embedded <a href="https://github.com/NASAWorldWind">WorldWind</a> instance.</p>
            <p>Use the mouse wheel or touchpad gestures to zoom in on the modeled plane. Select the <code>flights</code> layer in the <code>layers</code>
            panel, click on the <code>query</code> button to get a list with displayed aircraft (just one in this example), select the
            aircraft in the list view and check some of the display options. Double clicking on the line will expand the <code>selected
object</code> panel that shows live updates on positions and provides an additional view option to automatically center the
            WorldWind display on the airplane position.</p>
            <p>The <code>selected object</code> panel can also be brought up by double clicking on the plane symbol within the WorldWind view.
            The eject button can be used to dismiss the panel. Click on the green/red arrows next to the panel titles to
            collapse/expand the respective panel. Again, terminate by entering option &#39;9&#39; from the console window that was used to
            start RACE.</p>
            
            <h2 id="distributed-operation" class="section">Distributed Operation</h2>
            <p>The next two examples show how RACE instances can communicate by means of remote actors, and require two console
            windows to start</p>
            <p><strong>(3) config/remote-lookup</strong> is an example of how to run RACE with a remote actor that was started upfront (there also
            is a <code>remote-start</code> example that uses a generic RACE configuration to launch external actors). This is basically the
            same as the <code>config/local/aircraft.conf</code> example, only that the aircraft model actor is running in a separate process.
            Note this is fully achieved by means of configuration and uses exactly the same actor code.</p>
            <p>In this example we use the <code>--info</code> command line option of RACE to obtain additional logging output. From the first
            console, start the satellite instance:</p>
            <pre><code>&gt; ./race --info config/remote-lookup/satellite.conf</code></pre>
            <p>Once the RACE prompt appears, start another RACE instance from a second console:</p>
            <pre><code>&gt; ./race --info config/remote-lookup/master.conf</code></pre>
            <p>Terminate in reverse order (master, then satellite) from respective console windows. Look at the logging output in both
            console windows to see the initialization, start and termination sequences.</p>
            <p><strong>(4) remote-sync</strong> is an example that shows how RACE channels can be used to synchronize several RACE viewers. From a first
            console, execute:</p>
            <pre><code>&gt; ./race config/remote-sync/satellite1-viewer.conf</code></pre>
            <p>Once the WorldWind window appears, locate the <code>sync</code> panel and click on the <code>active</code> option. Now start the second
            RACE instance from another console:</p>
            <pre><code>&gt; ./race config/remote-sync/master-viewer.conf</code></pre>
            <p>As a first effect, you should see the modeled aircraft position appearing as a red dot in both views. Now click on the
            <code>active</code> checkbox of the <code>sync</code> panel of the new RACE viewer, which will synchronize both views. Zoom in, rotate
            the globe or select the aircraft from any view and you should see the other view automatically following.</p>
            <p>Select the <code>airport</code> layer in the <code>layers</code> panel, and then select one of the items in the <code>goto airports</code>
            combo box of the <code>selected layer</code> list - both views should simultaneously pan&amp;zoom in on the selected airport.</p>
            <p>Again, terminate the master and then the satellite.</p>
            
            <h2 id="live-data-import" class="section">Live Data Import</h2>
            <p>So far, none of the examples has used real data, but if you happen to have access to an ADS-B receiver - or maybe even
            a SWIM server feed - you can use the following configuration files to access that data.</p>
            <p><strong>(5) config/imports/sbs-fpos.ww.conf</strong> allows to read raw ADS-B data from port 30003 of the machine that runs RACE.
            Please see instructions on the <a href="http://flightaware.com/adsb/piaware/">PiAware</a> website for how to build an inexpensive ADS-B receiver. If the decoder
            (e.g. <a href="https://github.com/MalcolmRobb/dump1090">dump1090</a>) is not running on the same machine, port forward via ssh before starting RACE, e.g. by executing:</p>
            <pre><code>&gt; ssh  -L 30003:localhost:30003 &lt;user&gt;@&lt;receiver-host&gt;</code></pre>
            <p>Then start RACE from a second console with:</p>
            <pre><code>&gt; ./race config/imports/sbs-fpos-ww.conf</code></pre>
            <p>You should see the live ADS-B data from your receiver appearing in the WorldWind view. Select the <code>ads-b</code> layer,
            click on the <code>update</code> checkbox, click the <code>query</code> button and all flights should be appear in the layerinfo list.
            Select <code>inherit</code> and then <code>path</code>, and all flights (including new ones) should have their respective flight paths
            displayed.</p>
            <p><strong>(6) config/imports/swim-all-sbs-ww.conf</strong> is a much bigger example that imports live data from a SWIM server. Since
            this is non-public information such a server most likely requires access credentials, which means you need to use
            encrypted configurations and provide a vault pass phrase when starting RACE (please see the <a href="design/configuration.html#runtime-configuration">Runtime Configuration</a>
            and <a href="usage/encryption.html#using-encrypted-configurations">Using Encrypted Configurations</a> sections for details).:</p>
            <pre><code>&gt; ./race --vault &lt;path-to-encrypted-config&gt; config/imports/swim-all-sbs-ww.conf</code></pre>
            <p>Please also note that the example configuration uses a portmapper actor to access the SWIM server through a gateway,
            which requires additional interactive user authentication for the gateway. This mostly serves as an example of how
            to do large scale, realtime data import from secure sources.</p>
            
            <h2 id="data-replay" class="section">Data Replay</h2>
            <p>In case you don&#39;t have access to an ADS-B receiver or a SWIM feed, you can obtain recorded data from the
            <a href="https://github.com/nasarace/race-data">race-data</a> project on GitHub.</p>
            <p>PLEASE MAKE SURE YOU HAVE THE <a href="https://git-lfs.github.com/">GIT-LFS</a> EXTENSION INSTALLED BEFORE CLONING <a href="https://github.com/nasarace/race-data">race-data</a></p>
            <p>Since <a href="https://github.com/nasarace/race-data">race-data</a> only contains (compressed) recorded data and configuration files, there is no need to build anything.
            Assuming you installed race-data inside the same directory as RACE itself, you can start the recording like this:</p>
            <pre><code>&gt; ./race ../race-data/sbs-KNUQ-070516-1417/sbs-replay-ww.conf</code></pre>
            <p>Please note that most recordings have about 30sec delay time before the replay starts. This replay is faithful. It
            uses the same format as example (5), only from a different input source (file instead of receiver), which shows how
            easily actors can be re-used in a different context.</p>
            <p>At the time of this writing, <a href="https://github.com/nasarace/race-data">race-data</a> only contains publicly available ADS-B recordings (each about 1h of live data
            from the San Francisco Bay Area). As the same mechanism can be applied to full US airspace recordings at about a
            5MB/min, we hope to include additional, larger data sets in the future.</p>
        </div>

    </body>
</html>