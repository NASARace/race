<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>RACE</title>

        <link href="../race-html.css" rel="stylesheet"/>
    </head>

    <body>
        <div class="navbar">
            <div class=""banner>
                <a href="index.html" ><img class="logo" src="../images/race128.png"></a>
                <p class="doctitle">RACE Manual</p>
            </div>
            <br/>
            <div class="toc">
                <p class="title">Project Links</p>
                <ul>
                    <li><span class="toc level2"><a href="https://github.com/NASARace/race.git">Repository</a></span></li>
                    <li><span class="toc level2"><a href="http://nasarace.github.io/race">Website</a></span></li>
                </ul>
            </div>
            <div class="pagetoc">
                <div class="toc">
                  <p class="title">Page</p>
                  <ul>
                    <li><span class="toc level1"><a href="#1-one-process-basic-configuration">1. One process basic configuration</a></span></li>
                    <li><span class="toc level1"><a href="#2-one-process-geospatial-viewer-worldwind">2. One process geospatial viewer (WorldWind)</a></span></li>
                    <li><span class="toc level1"><a href="#3-jms-import">3. JMS import</a></span></li>
                    <li><span class="toc level1"><a href="#4-jms-import-and-export">4. JMS import and export</a></span></li>
                    <li><span class="toc level1"><a href="#5-remote-actor-lookup">5. Remote actor lookup</a></span></li>
                    <li><span class="toc level1"><a href="#6-remote-actor-startup">6. Remote actor startup</a></span></li>
                  </ul>
                </div>
            </div>
            <div class="globaltoc">
                <div class="toc">
                  <p class="title">Site</p>
                  <ul>
                    <li><span class="toc level1"><a href="../index.html">About RACE</a></span></li>
                    <li>
                      <p class="toc level1">Installing RACE</p>
                      <ul>
                        <li><span class="toc level2"><a href="../installation/prerequisites.html">Prerequisites</a></span></li>
                        <li><span class="toc level2"><a href="../installation/download.html">Downloading RACE</a></span></li>
                        <li><span class="toc level2"><a href="../installation/build.html">Building RACE</a></span></li>
                        <li><span class="toc level2"><a href="../installation/osx.html">OS X Specifics</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Using RACE</p>
                      <ul>
                        <li><span class="toc level2"><a href="running.html">How to Run RACE</a></span></li>
                        <li><span class="toc level2"><a href="configuration.html">RACE Configuration</a></span></li>
                        <li><span class="toc level2"><a href="encryption.html">Using Encrypted Configurations</a></span></li>
                        <li><span class="toc level2 active">RACE examples</span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1"><a href="../actors.html">Actors</a></p>
                      <ul>
                        <li><span class="toc level2"><a href="../actors.html#actor-components-and-properties">Actor Components and Properties</a></span></li>
                        <li><span class="toc level2"><a href="../actors.html#actor-communication">Actor Communication</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">RACE Design</p>
                      <ul>
                        <li><span class="toc level2"><a href="../design/overview.html">Design Overview</a></span></li>
                        <li><span class="toc level2"><a href="../design/configuration.html">Runtime Configuration</a></span></li>
                        <li><span class="toc level2"><a href="../design/raceactors.html">RaceActors</a></span></li>
                        <li><span class="toc level2"><a href="../design/channeltopics.html">ChannelTopics</a></span></li>
                        <li><span class="toc level2"><a href="../design/worldwind.html">WorldWind Viewer</a></span></li>
                        <li><span class="toc level2"><a href="../design/remotelauncher.html">RemoteLauncher</a></span></li>
                        <li><span class="toc level2"><a href="../design/layers-and-modules.html">Layers and Modules</a></span></li>
                        <li><span class="toc level2"><a href="../design/directory-structure.html">Directory Structure</a></span></li>
                        <li><span class="toc level2"><a href="../design/local-build.html">Local Build Configuration</a></span></li>
                        <li><span class="toc level2"><a href="../design/dds.html">RACE and DDS</a></span></li>
                        <li><span class="toc level2"><a href="../design/whyscala.html">Why Scala</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1"><a href="../examples.html">RACE Examples</a></p>
                      <ul>
                        <li><span class="toc level2"><a href="../examples.html#basic-examples">Basic Examples</a></span></li>
                        <li><span class="toc level2"><a href="../examples.html#distributed-operation">Distributed Operation</a></span></li>
                        <li><span class="toc level2"><a href="../examples.html#live-data-import">Live Data Import</a></span></li>
                        <li><span class="toc level2"><a href="../examples.html#data-replay">Data Replay</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1">Documentation</p>
                      <ul>
                        <li><span class="toc level2"><a href="../documentation/overview.html">RACE Documentation Overview</a></span></li>
                        <li><span class="toc level2"><a href="../documentation/presentations.html">Available Slide Presentations</a></span></li>
                      </ul>
                    </li>
                    <li>
                      <p class="toc level1"><a href="../learning.html">Learning Resources</a></p>
                      <ul>
                        <li><span class="toc level2"><a href="../learning.html#scala">Scala</a></span></li>
                        <li><span class="toc level2"><a href="../learning.html#actors-and-akka">Actors and Akka</a></span></li>
                        <li><span class="toc level2"><a href="../learning.html#sbt">SBT</a></span></li>
                        <li><span class="toc level2"><a href="../learning.html#interactive-scala-akka-and-sbt-learning-environment-and-examples">Interactive Scala, Akka and SBT Learning Environment and Examples</a></span></li>
                        <li><span class="toc level2"><a href="../learning.html#git">Git</a></span></li>
                      </ul>
                    </li>
                    <li><span class="toc level1"><a href="../glossary.html">Glossary</a></span></li>
                  </ul>
                </div>
            </div>
        </div>

        <div class="main">
            <h1 id="race-examples" class="title">RACE examples</h1>
            <p>Before running the examples, make sure all three involved RACE executables have
            been built and stages (by means of SBT)</p>
            <pre><code>&gt; sbt
...
[race]&gt; stage
...
[race]&gt; project swimServer
[swimServer]&gt; stage
...
[swimServer]&gt; project swimClient
[swimClient]&gt; stage
...
[swimClient]&gt; exit
&gt;</code></pre>
            <p>The following examples are included in the RACE distribution:</p>
            
            <h2 id="1-one-process-basic-configuration" class="section">1. One process basic configuration</h2>
            <pre><code>&gt; script/race config/local/aircraft.conf</code></pre>
            <p>This example consists of two actors running in the same process: one aircraft
            model that produces flight position messages, and one actor reading those
            messages and printing them to the screen.</p>
            <p>To terminate, hit <code>&lt;cr&gt;</code> and select the menu option &quot;3&quot; (exit)</p>
            
            <h2 id="2-one-process-geospatial-viewer-worldwind" class="section">2. One process geospatial viewer (WorldWind)</h2>
            <pre><code>&gt; script/race config/local/aircraft-ww.conf</code></pre>
            <p>This example replaces the screen printout actor with a <a href="wwd">WorldWind</a> instance
            that is interfaced by means of an actor endpoint, rendering the flight position
            updates by means of OpenGL.</p>
            <p>To terminate, close the WorldWind window, and then proceed with RACE termination
            as in example 1</p>
            
            <h2 id="3-jms-import" class="section">3. JMS import</h2>
            <p>This example involves two processes that should be started from different
            terminal windows. This example uses an actor that connects to a JMS server with
            a configured URI, subscribes to a configured JMS topic, and publishes received
            JMS message payloads to a specified RACE channel. The second actor subscribes to
            this channel and prints its messages on the screen</p>
            <p>Within the first window, execute</p>
            <pre><code>&gt; script/swimserver</code></pre>
            <p>Once the server is up, switch to the second window and execute</p>
            <pre><code>&gt; script/race config/imports/jms.conf</code></pre>
            <p>This starts RACE, connecting to the JMS broker. One RACE is up, switch back to
            the first window and send a test message by entering menu option &quot;1&quot;. The RACE
            window should show the received test message.</p>
            <p>To terminate RACE follow the steps of example 1. You can leave the swimServer
            running as it is also used in the next example.</p>
            
            <h2 id="4-jms-import-and-export" class="section">4. JMS import and export</h2>
            <p>This is a three process example that demonstrates how RACE can itself act as a
            SWIM (JMS) server. It adds two new actors:
              * an embedded JMS broker (running a <a href="amq">ActiveMQ</a> instance within RACE) that
                implements the external facing, SWIM personality of RACE
              * a JMS export actor that listens to a RACE channel and send all received messages
                through a direct (non-network, in-memory) connector to the ActiveMQ broker</p>
            <p>In the first window start the swimServer as in the previous example</p>
            <p>In the second window, start RACE with</p>
            <pre><code>&gt; script/race config/exports/jms.conf</code></pre>
            <p>In the third window, start a (RACE unaware) JMS client, specifying the port on
            which RACE publishes its JMS messages:</p>
            <pre><code>&gt; script/swimclient -p 61617</code></pre>
            <p>If the <code>swimClient</code> would be started without <code>-p</code> it would connect to the
            swimServer instead of RACE.</p>
            <p>Now send a test message from the <code>swimServer</code> window (menu option &quot;1&quot;) - it
            should be received by RACE, re-published through the embedded JMS broker, and
            then received by the <code>swimClient</code></p>
            <p>To shut down, exit the <code>swimClient</code>, then RACE, and finally the <code>swimServer</code></p>
            
            <h2 id="5-remote-actor-lookup" class="section">5. Remote actor lookup</h2>
            <p>This example shows how actors can be configured to run in separate
            processes/machines without requiring any changes to their code. It is a
            distributed version of the first example in which the configuration of the
            aircraft model (including its type) is only known to the satellite.</p>
            <p>In the first window, start RACE running an aircraft model in satellite mode:</p>
            <pre><code>&gt; script/race -s config/remote-lookup/satellite.conf</code></pre>
            <p>Please note the <code>-s</code> option of RACE. Once the RACE satellite is up, start the
            RACE master from a second window</p>
            <pre><code>&gt; script/race config/remote-lookup/master.conf</code></pre>
            <p>This should look up and then connect to the remotely running aircraft model, and
            then produce the same output as example 1.</p>
            <p>To terminate, first exit the RACE satellite and then the RACE master.</p>
            <p>It should be noted that while the messages contain the same <code>FlightPos</code> objects
            as in the first example, the system automatically marshals/unmarshals those
            objects when sending them over the network - neither the producer (aircraft
            actor running in the satellite) nor the consumer (probe actor running in the
            master) need to be aware of remoting. This represents full <strong>location
            transparency</strong>.</p>
            
            <h2 id="6-remote-actor-startup" class="section">6. Remote actor startup</h2>
            <p>This is a variation of the previous example in which the remote actor is not
            explicitly launched but automatically started through a satellite launch daemon
            upon request by the RACE master, using master configuration data.</p>
            <p>In the first window, start the satellite launch daemon</p>
            <pre><code>&gt; script/race -s</code></pre>
            <p>In the second window, start the RACE master</p>
            <pre><code>&gt; script/race config/remote-start/master.conf</code></pre>
            <p>This should automatically start the aircraft model in the satellite, which then sends
            its flight position messages to the master, which displays the messages using the
            probe actor.</p>
            <p>Please follow the same termination sequence as before.</p>
        </div>

    </body>
</html>