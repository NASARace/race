<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>RACE</title>

        <link href="../race-html.css" rel="stylesheet"/>
    </head>

    <body>
        <div class="navbar">
            <div class=""banner>
                <a href="../index.html" ><img class="logo" src="../images/race128.png"></a>
                <p class="doctitle">RACE Manual</p>
            </div>
            <br/>
            <div class="toc">
                <p class="title">Project Links</p>
                <ul>
                    <li><span class="toc level2"><a href="https://github.com/NASARace/race.git">Repository</a></span></li>
                    <li><span class="toc level2"><a href="http://nasarace.github.io/race">Website</a></span></li>
                </ul>
            </div>
            <div class="toc pagetoc">
                <p class="title">Page</p>
                <ul class="nav-list">
                  <li class="level1 active"><a href="#">Runtime Configuration</a></li>
                  <li class="level2"><a href="#config-file-format">Config File Format</a></li>
                  <li class="level2"><a href="#encrypted-configurations">Encrypted Configurations</a></li>
                </ul>
            </div>
            <div class="toc globaltoc">
                <p class="title">Site</p>
                <ul class="nav-list">
                  <li class="level1 nav-header">RACE Manual</li>
                  <li class="level2"><a href="../index.html">About RACE</a></li>
                  <li class="level2 nav-header">Installing RACE</li>
                  <li class="level3"><a href="../installation/prerequisites.html">Prerequisites</a></li>
                  <li class="level3"><a href="../installation/download.html">Downloading RACE</a></li>
                  <li class="level3"><a href="../installation/build.html">Building RACE</a></li>
                  <li class="level3"><a href="../installation/pitfalls.html">Installation Pitfalls</a></li>
                  <li class="level3"><a href="../installation/osx.html">OS X Specifics</a></li>
                  <li class="level2 nav-header">Using RACE</li>
                  <li class="level3"><a href="../usage/running.html">How to Run RACE</a></li>
                  <li class="level3"><a href="../usage/configuration.html">RACE Configuration</a></li>
                  <li class="level3"><a href="../usage/encryption.html">Using Encrypted Configurations</a></li>
                  <li class="level2 nav-header">RACE Design</li>
                  <li class="level3"><a href="overview.html">Design Overview</a></li>
                  <li class="level3"><a href="actors.html">Actors</a></li>
                  <li class="level3 active"><a href="#">Runtime Configuration</a></li>
                  <li class="level3"><a href="raceactors.html">RaceActors</a></li>
                  <li class="level3"><a href="channeltopics.html">ChannelTopics</a></li>
                  <li class="level3"><a href="embedded-objects.html">Embedded Objects</a></li>
                  <li class="level3"><a href="connectivity.html">Connecting External Systems</a></li>
                  <li class="level3"><a href="remoting.html">Remote RaceActors and Distributed RACE Applications</a></li>
                  <li class="level3"><a href="remotelauncher.html">RemoteLauncher</a></li>
                  <li class="level3"><a href="hc.html">Heterogeneous Computing in RACE</a></li>
                  <li class="level3"><a href="parsing.html">RACE Parsers</a></li>
                  <li class="level3"><a href="archive-replay.html">Archive and Replay</a></li>
                  <li class="level3"><a href="timeseries.html">Time Series Analysis</a></li>
                  <li class="level3"><a href="trajectory.html">Trajectory Infrastructure</a></li>
                  <li class="level3"><a href="rgis.html">RACE GIS Support</a></li>
                  <li class="level3"><a href="worldwind.html">WorldWind Viewer</a></li>
                  <li class="level3"><a href="http-server.html">HttpServer</a></li>
                  <li class="level3"><a href="http-client.html">HttpImportActor</a></li>
                  <li class="level3"><a href="share.html">SHARE - System for Hierarchical Ad hoc Reporting</a></li>
                  <li class="level3"><a href="layers-and-modules.html">Layers and Modules</a></li>
                  <li class="level3"><a href="directory-structure.html">Directory Structure</a></li>
                  <li class="level3"><a href="repository.html">Repository Structure</a></li>
                  <li class="level3"><a href="local-build.html">Local Build Configuration</a></li>
                  <li class="level3"><a href="dds.html">RACE and DDS</a></li>
                  <li class="level3"><a href="extproject.html">Using RACE from External Projects</a></li>
                  <li class="level3"><a href="whyscala.html">Why Scala</a></li>
                  <li class="level2 nav-header">Documentation</li>
                  <li class="level3"><a href="../documentation/overview.html">RACE Documentation Overview</a></li>
                  <li class="level3"><a href="../documentation/presentations.html">Available Slide Presentations</a></li>
                  <li class="level2 nav-header">Annex</li>
                  <li class="level3"><a href="../annex/project-log.html">Project Log</a></li>
                  <li class="level3"><a href="../annex/examples.html">RACE Examples</a></li>
                  <li class="level3"><a href="../annex/known-problems.html">Known Problems</a></li>
                  <li class="level3"><a href="../annex/changes.html">Changes</a></li>
                  <li class="level3"><a href="../annex/todo.html">TODO List</a></li>
                  <li class="level3"><a href="../annex/learning.html">Learning Resources</a></li>
                  <li class="level3"><a href="../annex/glossary.html">Glossary</a></li>
                </ul>
            </div>
        </div>

        <div class="main">
            <h1 id="runtime-configuration" class="title">Runtime Configuration</h1>
            <p>Concrete RACE applications are not hard coded. They are defined by configuration files
            that specify which actors the application consists of, how these actors communicate, and what
            parameters they take.</p>
            <p>The underlying library to process configuration files is the same <a href="https://github.com/typesafehub/config">TypesafeConfig</a> library that
            is used by Akka itself, hence all configuration (Akka <em>and</em> RACE) can be done through a single,
            consistent mechanism and the same text file(s). While TypesafeConfig supports various formats such
            as XML and Java properties, we promote the use of <a href="https://github.com/typesafehub/config/blob/master/HOCON.md">HOCON</a> (Human-Optimized Config Object Notation).
            RACE configuration files can get large, and HOCON&#39;s more readable syntax and especially
            factorization features (includes, string interpolation) are helpful to understand configurations.</p>
            <p>The underlying data model is a tree of key/value elements, where each value is either a primitive
            (String, Boolean, Int etc.), an object (set of key/value pairs &quot;{..}&quot;), or an array of element
            values &quot;[..]&quot;.</p>
            
            <h2 id="config-file-format" class="section"><a class="anchor-link left" href="#config-file-format"><i class="icofont-laika">&#xef71;</i></a>Config File Format</h2>
            <p>A typical RACE configuration file looks like this:</p>
            <pre><code class="HOCON">// example RACE configuration
universe = {
  name = &quot;SimpleProbe&quot;                                         // name of universe
  actors = [                                                   // list of actor objects
    { name = &quot;aircraft&quot;                                        // name of actor
      class = &quot;gov.nasa.race.air.actor.SimpleAircraft&quot;     // class of actor
      write-to = &quot;/flights/positions&quot;                          // channel this actor writes to
      ...
    },
    { name = &quot;probe&quot;
      class = &quot;gov.nasa.race.actor.ProbeActor&quot;
      read-from = &quot;/flights/positions&quot;                         // channel this actor reads from
    }
  ]
  include classpath(&quot;config/logging-race.conf&quot;)
}</code></pre>
            <p>The top element of a RACE configuration is a <code>universe</code> object, which holds two main sub-elements:</p>
            <ul>
              <li><code>name</code> identifies this RACE instance at runtime so that it can be referenced from remote RACEs</li>
              <li><code>actors</code> is a list of the actor specifications this RACE instance consists of</li>
            </ul>
            <p>Each <code>actors</code> element describes a single <a href="raceactors.html">RaceActor</a> instance, identified by <code>name</code> and
            respective implementation <code>class</code>. Communication between RaceActors happens through <em>bus
            channels</em>, which are specified as path strings such as <code>/flights/positions</code>. Output channels of
            RaceActors are specified with a &quot;write-to&quot; element that can hold either a single string or an array
            of strings. Input channels are configured with respective &quot;read-from&quot; elements. Note that channels
            do not need to be defined separately as they are merely selectors for the Akka EventBus at runtime.
            The <code>read-from</code> values can contain wildcards such as <code>flights/*</code>, which allow subscriptions to
            a whole sub-tree of channels.</p>
            <p>Depending on the concrete <a href="raceactors.html">RaceActor</a> class, each <code>actors</code> element can also hold class specific
            parameters.</p>
            <p>Communication between different RACE instances (processes) is done by means of <em>remote</em> actors, as
            shown by the following diagram:</p>
            <p><img class="center scale90" src="../images/race-config.svg" alt="RACE configuration"></p>
            <p>Here, the <code>remotePlane</code> actor of the <code>mySimulation</code> universe (to the left) does not contain a
            <code>class</code> specification, but instead has a <code>remote</code> element that holds a URI that specifies the
            hostname and universe name of the remote RACE (to the right). Remote actors can either be
            started by the remote configuration, or upon request from the referencing universe. The first case
            represents a <em>remote lookup</em> that allows to split respective actor configuration into local and
            remote settings.</p>
            
            <h2 id="encrypted-configurations" class="section"><a class="anchor-link left" href="#encrypted-configurations"><i class="icofont-laika">&#xef71;</i></a>Encrypted Configurations</h2>
            <p>Some <a href="raceactors.html#raceactors">RaceActors</a> might need to be parameterized with values that are confidential, such as
            user credentials or non-public URIs. RACE supports this case by means of encrypted configuration
            values - instead of having a pain text parameter specification such as <code>password = &quot;12345&quot;</code>, a
            symbolic value prefixed by <code>??</code> (such as <code>password = ??server.pw</code>) is used. This symbolic value
            (e.g. <code>server.pw</code>) is a key into a special, encrypted <em>vault</em> configuration file that is specified
            alongside the normal configuration file when starting RACE.</p>
            <p><img class="center scale70" src="../images/race-vault.svg" alt="encrypted configurations"></p>
            <p>Vault files are encrypted with symmetric ciphers (either user provided or retrieved from a
            keystore). Vault values are never stored as plain text at runtime, and have to be retrieved by
            actors by means of special APIs. The top element of a vault configuration file has to be named
            <code>secret</code>.</p>
            <p>Please refer to the <a href="../usage/encryption.html#using-encrypted-configurations">Using Encrypted Configurations</a> section for a description of related tools
            and commands to create vaults and/or keystores.</p>
        </div>

    </body>
</html>