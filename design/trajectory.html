<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>RACE</title>

        <link href="../race-html.css" rel="stylesheet"/>
    </head>

    <body>
        <div class="navbar">
            <div class=""banner>
                <a href="../index.html" ><img class="logo" src="../images/race128.png"></a>
                <p class="doctitle">RACE Manual</p>
            </div>
            <br/>
            <div class="toc">
                <p class="title">Project Links</p>
                <ul>
                    <li><span class="toc level2"><a href="https://github.com/NASARace/race.git">Repository</a></span></li>
                    <li><span class="toc level2"><a href="http://nasarace.github.io/race">Website</a></span></li>
                </ul>
            </div>
            <div class="toc pagetoc">
                <p class="title">Page</p>
                <ul class="nav-list">
                  <li class="level1 active"><a href="#">Trajectory Infrastructure</a></li>
                  <li class="level2"><a href="#storage">Storage</a></li>
                  <li class="level2"><a href="#mutability">Mutability</a></li>
                  <li class="level2"><a href="#scope">Scope</a></li>
                  <li class="level2"><a href="#surrounding-infrastructure">Surrounding Infrastructure</a></li>
                </ul>
            </div>
            <div class="toc globaltoc">
                <p class="title">Site</p>
                <ul class="nav-list">
                  <li class="level1 nav-header">RACE Manual</li>
                  <li class="level2"><a href="../index.html">About RACE</a></li>
                  <li class="level2 nav-header">Installing RACE</li>
                  <li class="level3"><a href="../installation/prerequisites.html">Prerequisites</a></li>
                  <li class="level3"><a href="../installation/download.html">Downloading RACE</a></li>
                  <li class="level3"><a href="../installation/build.html">Building RACE</a></li>
                  <li class="level3"><a href="../installation/pitfalls.html">Installation Pitfalls</a></li>
                  <li class="level3"><a href="../installation/osx.html">OS X Specifics</a></li>
                  <li class="level2 nav-header">Using RACE</li>
                  <li class="level3"><a href="../usage/running.html">How to Run RACE</a></li>
                  <li class="level3"><a href="../usage/configuration.html">RACE Configuration</a></li>
                  <li class="level3"><a href="../usage/encryption.html">Using Encrypted Configurations</a></li>
                  <li class="level2 nav-header">RACE Design</li>
                  <li class="level3"><a href="overview.html">Design Overview</a></li>
                  <li class="level3"><a href="actors.html">Actors</a></li>
                  <li class="level3"><a href="configuration.html">Runtime Configuration</a></li>
                  <li class="level3"><a href="raceactors.html">RaceActors</a></li>
                  <li class="level3"><a href="channeltopics.html">ChannelTopics</a></li>
                  <li class="level3"><a href="embedded-objects.html">Embedded Objects</a></li>
                  <li class="level3"><a href="connectivity.html">Connecting External Systems</a></li>
                  <li class="level3"><a href="remoting.html">Remote RaceActors and Distributed RACE Applications</a></li>
                  <li class="level3"><a href="remotelauncher.html">RemoteLauncher</a></li>
                  <li class="level3"><a href="hc.html">Heterogeneous Computing in RACE</a></li>
                  <li class="level3"><a href="parsing.html">RACE Parsers</a></li>
                  <li class="level3"><a href="archive-replay.html">Archive and Replay</a></li>
                  <li class="level3"><a href="timeseries.html">Time Series Analysis</a></li>
                  <li class="level3 active"><a href="#">Trajectory Infrastructure</a></li>
                  <li class="level3"><a href="rgis.html">RACE GIS Support</a></li>
                  <li class="level3"><a href="worldwind.html">WorldWind Viewer</a></li>
                  <li class="level3"><a href="http-server.html">HttpServer</a></li>
                  <li class="level3"><a href="http-client.html">HttpImportActor</a></li>
                  <li class="level3"><a href="share.html">SHARE - System for Hierarchical Ad hoc Reporting</a></li>
                  <li class="level3"><a href="layers-and-modules.html">Layers and Modules</a></li>
                  <li class="level3"><a href="directory-structure.html">Directory Structure</a></li>
                  <li class="level3"><a href="repository.html">Repository Structure</a></li>
                  <li class="level3"><a href="local-build.html">Local Build Configuration</a></li>
                  <li class="level3"><a href="dds.html">RACE and DDS</a></li>
                  <li class="level3"><a href="extproject.html">Using RACE from External Projects</a></li>
                  <li class="level3"><a href="whyscala.html">Why Scala</a></li>
                  <li class="level2 nav-header">Documentation</li>
                  <li class="level3"><a href="../documentation/overview.html">RACE Documentation Overview</a></li>
                  <li class="level3"><a href="../documentation/presentations.html">Available Slide Presentations</a></li>
                  <li class="level2 nav-header">Annex</li>
                  <li class="level3"><a href="../annex/project-log.html">Project Log</a></li>
                  <li class="level3"><a href="../annex/examples.html">RACE Examples</a></li>
                  <li class="level3"><a href="../annex/known-problems.html">Known Problems</a></li>
                  <li class="level3"><a href="../annex/changes.html">Changes</a></li>
                  <li class="level3"><a href="../annex/todo.html">TODO List</a></li>
                  <li class="level3"><a href="../annex/learning.html">Learning Resources</a></li>
                  <li class="level3"><a href="../annex/glossary.html">Glossary</a></li>
                </ul>
            </div>
        </div>

        <div class="main">
            <h1 id="trajectory-infrastructure" class="title">Trajectory Infrastructure</h1>
            <p>One of the main use cases of RACE is to analyze trajectories, i.e. the change of track state over
            time. Most of our track input sources only provide such updates as irregular time series that are
            not synchronized (different tracks updated at different time points). Moreover, the duration between
            updates can be too long for some properties, which will require interpolation.</p>
            <p>The target analysis might also involve a large number of tracks and thus performance and memory
            requirements can be challenging, especially for RACE applications that can run for an unspecified
            amount of time (e.g. to monitor live data).</p>
            <p>To that end, RACE provides a comprehensive infrastructure that allows to choose the most suitable
            trajectory implementation for a given task but hides implementation details from clients by
            using high level interfaces (traits) to access them. The top interface types are <code>Trajectory</code> to
            read and <code>MutTrajectory</code> to write/extend trajectory data.</p>
            <p>There are three major dimensions of trajectory refinement:</p>
            <ul>
              <li>storage model</li>
              <li>mutability</li>
              <li>scope</li>
            </ul>
            <p>While some combinations of these refinements are related there is a general need to avoid code
            duplication along those axes. The RACE trajectory infrastructure reflects that by using a number
            of <em class="title-reference">..Traj</em> types that are only internal implementation constructs for the purpose of factoring
            common parts.</p>
            <p><img class="center scale90" src="../images/trajectory.svg" alt="Trajectory Infrastructure"></p>
            
            <h2 id="storage" class="section"><a class="anchor-link left" href="#storage"><i class="icofont-laika">&#xef71;</i></a>Storage</h2>
            <p>Storage of trajectory points mostly reflects the required position accuracy. While storage models
            can be extended, RACE comes with three default storage models:</p>
            <ul>
              <li>accurate</li>
              <li>compressed</li>
              <li>offset-based</li>
            </ul>
            <p><strong>Accurate</strong> trajectories store latitude and longitude as <code>double</code> floating point values and hence
            require the most memory of our storage models.</p>
            <p><strong>Compressed</strong> trajectories store latitude and longitude pairs as fix point values in 64bit,
            preserving about 7 degree decimals (corresponding to ~1cm accuracy). Use this storage model if
            a large number of un-bounded trajectories are recorded. Note that accuracy depends on latitude
            (largest errors at equator).</p>
            <p><strong>Offset-based</strong> trajectories use a geographic reference point and a 64bit reference time to store
            trajectory points as float/int offsets to those reference values. This storage model is therefore
            only usable for trajectories that span less than 24d.</p>
            
            <h2 id="mutability" class="section"><a class="anchor-link left" href="#mutability"><i class="icofont-laika">&#xef71;</i></a>Mutability</h2>
            <p>Trajectories can be either immutable of mutable, the latter one being represented by the
            <code>MutTrajectory</code> interface that defines methods to add trajectory points.</p>
            
            <h2 id="scope" class="section"><a class="anchor-link left" href="#scope"><i class="icofont-laika">&#xef71;</i></a>Scope</h2>
            <p>Trajectory scope describes the time interval that is covered in the stored data. RACE supports two
            scopes:</p>
            <ul>
              <li>full</li>
              <li>trace</li>
            </ul>
            <p>Full coverage means all updates are stored in the trajectory. This means that memory requirements
            for unspecified runtime cannot be bounded, regardless of the chosen storage model.</p>
            <p>In many cases, a full trajectory is not required and we only need the last part of a trajectory,
            which we call a <em>trace</em>. RACE traces are stored in circular buffers, i.e. we limit the maximum
            number of accessible trajectory points and therefore can guarantee that memory will be bounded. This
            also means that for irregular, asynchronously updated time series we can not assume per se that
            different traces cover the same duration.</p>
            <p>Since traces are an optimization to limit memory requirements for updated trajectories they are
            always mutable.</p>
            
            <h2 id="surrounding-infrastructure" class="section"><a class="anchor-link left" href="#surrounding-infrastructure"><i class="icofont-laika">&#xef71;</i></a>Surrounding Infrastructure</h2>
            <p>Since most RACE trajectories represent un-synchronized irregular time series a common trajectory
            related task is interpolation, to obtain corresponding time points in sets of relevant trajectories.</p>
            <p><code>Trajectory</code> therefore implements a 3-dimensional <code>TDataSource</code> interface that enables the use
            of RACE&#39;s <code>TInterpolant</code> infrastructure for abstract interpolation. RACE currently comes with two
            implementations:</p>
            <ul>
              <li>simple linear interpolation</li>
              <li>rational spline based interpolation using the <a href="https://www.inf.usi.ch/hormann/papers/Floater.2007.BRI.pdf">FloaterHormann</a> algorithm</li>
            </ul>
            <p>For this purpose, trajectory implementations have to provide a conversion from trajectory points
            to abstract, timed <em class="title-reference">TDP3</em> data points.</p>
        </div>

    </body>
</html>