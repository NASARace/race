<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>RACE</title>

        <link href="../race-html.css" rel="stylesheet"/>
    </head>

    <body>
        <div class="navbar">
            <div class=""banner>
                <a href="../index.html" ><img class="logo" src="../images/race128.png"></a>
                <p class="doctitle">RACE Manual</p>
            </div>
            <br/>
            <div class="toc">
                <p class="title">Project Links</p>
                <ul>
                    <li><span class="toc level2"><a href="https://github.com/NASARace/race.git">Repository</a></span></li>
                    <li><span class="toc level2"><a href="http://nasarace.github.io/race">Website</a></span></li>
                </ul>
            </div>
            <div class="toc pagetoc">
                <p class="title">Page</p>
                <ul class="nav-list">
                  <li class="level1 active"><a href="#">ChannelTopics</a></li>
                </ul>
            </div>
            <div class="toc globaltoc">
                <p class="title">Site</p>
                <ul class="nav-list">
                  <li class="level1 nav-header">RACE Manual</li>
                  <li class="level2"><a href="../index.html">About RACE</a></li>
                  <li class="level2 nav-header">Installing RACE</li>
                  <li class="level3"><a href="../installation/prerequisites.html">Prerequisites</a></li>
                  <li class="level3"><a href="../installation/download.html">Downloading RACE</a></li>
                  <li class="level3"><a href="../installation/build.html">Building RACE</a></li>
                  <li class="level3"><a href="../installation/pitfalls.html">Installation Pitfalls</a></li>
                  <li class="level3"><a href="../installation/osx.html">OS X Specifics</a></li>
                  <li class="level2 nav-header">Using RACE</li>
                  <li class="level3"><a href="../usage/running.html">How to Run RACE</a></li>
                  <li class="level3"><a href="../usage/configuration.html">RACE Configuration</a></li>
                  <li class="level3"><a href="../usage/encryption.html">Using Encrypted Configurations</a></li>
                  <li class="level2 nav-header">RACE Design</li>
                  <li class="level3"><a href="overview.html">Design Overview</a></li>
                  <li class="level3"><a href="actors.html">Actors</a></li>
                  <li class="level3"><a href="configuration.html">Runtime Configuration</a></li>
                  <li class="level3"><a href="raceactors.html">RaceActors</a></li>
                  <li class="level3 active"><a href="#">ChannelTopics</a></li>
                  <li class="level3"><a href="embedded-objects.html">Embedded Objects</a></li>
                  <li class="level3"><a href="connectivity.html">Connecting External Systems</a></li>
                  <li class="level3"><a href="remoting.html">Remote RaceActors and Distributed RACE Applications</a></li>
                  <li class="level3"><a href="remotelauncher.html">RemoteLauncher</a></li>
                  <li class="level3"><a href="hc.html">Heterogeneous Computing in RACE</a></li>
                  <li class="level3"><a href="parsing.html">RACE Parsers</a></li>
                  <li class="level3"><a href="archive-replay.html">Archive and Replay</a></li>
                  <li class="level3"><a href="timeseries.html">Time Series Analysis</a></li>
                  <li class="level3"><a href="trajectory.html">Trajectory Infrastructure</a></li>
                  <li class="level3"><a href="rgis.html">RACE GIS Support</a></li>
                  <li class="level3"><a href="worldwind.html">WorldWind Viewer</a></li>
                  <li class="level3"><a href="http-server.html">HttpServer</a></li>
                  <li class="level3"><a href="http-client.html">HttpImportActor</a></li>
                  <li class="level3"><a href="share.html">SHARE - System for Hierarchical Ad hoc Reporting</a></li>
                  <li class="level3"><a href="layers-and-modules.html">Layers and Modules</a></li>
                  <li class="level3"><a href="directory-structure.html">Directory Structure</a></li>
                  <li class="level3"><a href="repository.html">Repository Structure</a></li>
                  <li class="level3"><a href="local-build.html">Local Build Configuration</a></li>
                  <li class="level3"><a href="dds.html">RACE and DDS</a></li>
                  <li class="level3"><a href="extproject.html">Using RACE from External Projects</a></li>
                  <li class="level3"><a href="whyscala.html">Why Scala</a></li>
                  <li class="level2 nav-header">Documentation</li>
                  <li class="level3"><a href="../documentation/overview.html">RACE Documentation Overview</a></li>
                  <li class="level3"><a href="../documentation/presentations.html">Available Slide Presentations</a></li>
                  <li class="level2 nav-header">Annex</li>
                  <li class="level3"><a href="../annex/project-log.html">Project Log</a></li>
                  <li class="level3"><a href="../annex/examples.html">RACE Examples</a></li>
                  <li class="level3"><a href="../annex/known-problems.html">Known Problems</a></li>
                  <li class="level3"><a href="../annex/changes.html">Changes</a></li>
                  <li class="level3"><a href="../annex/todo.html">TODO List</a></li>
                  <li class="level3"><a href="../annex/learning.html">Learning Resources</a></li>
                  <li class="level3"><a href="../annex/glossary.html">Glossary</a></li>
                </ul>
            </div>
        </div>

        <div class="main">
            <h1 id="channeltopics" class="title">ChannelTopics</h1>
            <p>ChannelTopics are a mechanism to control data flow along bus channels. While the channels can be
            seen as the static pipes between actors, ChannelTopics can be thought of as the valves that turn
            on/off data flow along those pipes on demand. The rationale behind channel topic requests is that
            high volume messages/data should only proliferate through a RACE system if there are active clients
            for that data, which otherwise should be filtered at the system boundaries.</p>
            <p>The two traits that implement the mechanism are <code>ChannelTopicSubscriber</code> (as the
            requesting consumer) and <code>ChannelTopicProvider</code> (as the producer). Both define a protocol that
            works fully transitive and asynchronous, i.e. providers can in turn request their own ChannelTopics
            when they receive a request, and respond once they got their requests answered. A single ChannelTopic
            request can therefore trigger a whole set of (different but related) requests upstream.</p>
            <p>Request topics are generic <code>Option[Any]</code> objects, i.e. their values can be either</p>
            <ul>
              <li><code>None</code> - indicating requests that refer to whole channels</li>
              <li><code>Some(object)</code> - which allows the use of application specific objects to further elaborate requests</li>
            </ul>
            <p>It is up to the ChannelTopicProvider to pattern match request topics it will serve.</p>
            <p><img class="center scale70" src="../images/race-channeltopics.svg" alt="RACE overview"></p>
            <p>At each level, requests are handled in four steps</p>
            <ul>
              <li>the request itself by the <code>ChannelTopicSubscriber</code> actor</li>
              <li>a response by one or more <code>ChannelTopicProvider</code> actors</li>
              <li>an accept by the subscriber to the selected provider</li>
              <li>data publishing of the accepted provider</li>
            </ul>
            <p>Conversely, the subscriber announces to the selected provider once it does not need the data
            anymore. <code>ChannelTopicProviders</code> keep track of their clients, and stop producing one the last
            client for a topic has de-registered.</p>
            <p>The <code>ChannelTopicSubscriber</code> API mainly consists of five methods:</p>
            <ul>
              <li>a system provided <code>request(channel,topic)</code> to request a topic for a single channel</li>
              <li>a system provided <code>requestTopic(topic)</code> for requests that pertain to all subscribed channels</li>
            </ul>
            <p>- an overridable <code>isResponseAccepted(response)</code> which returns true to select a responding provider
            (he default <code>isResponseAccepted()</code> implementation just picks the first responding provider)
            - a system provided <code>releaseChannelTopic(channelTopic)</code> to release a single channel/topic subscriptions
            - a system provided <code>releaseAll</code> to release all open channel/topic subscriptions</p>
            <p>The <code>ChannelTopicProvider</code> API has three methods:</p>
            <p>- a <code>isRequestAccepted(request)</code> that has to be defined by the concrete <code>ChannelTopicProvider</code>
            (there is no default), returning true for accepted responses
            - a overridable <code>gotAccept(accept)</code> that is automatically called upon receiving an accept
            - a overridable <code>gotRelease(release)</code>, automatically called upon receiving a release</p>
            <p>Providers that are also requesters by themselves have to mix in <code>TransitiveChannelTopicProvider</code>
            instead of <code>ChannelTopicProvider</code>. Since this trait mainly keeps track of mapping incoming to
            outgoing requests it does not have methods that need to be overridden or provided by concrete
            actor classes. Note that incoming to outgoing request relations are 1:N.</p>
        </div>

    </body>
</html>